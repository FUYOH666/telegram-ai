# Changelog

All notable changes to this project will be documented in this file.

## [0.2.0] - 2025-01-XX

### Added

- **Интеграция Web Search MCP** - автоматический поиск актуальной информации в интернете
  - Поддержка MCP Web Search сервера для получения актуальных данных
  - Автоматическое определение необходимости поиска по ключевым словам
  - Лимиты на количество запросов за диалог (настраиваемые)
  - Форматирование результатов поиска для включения в контекст AI

- **Улучшенный системный промпт** - более живое и естественное общение
  - Усиленная роль "Александр, основатель Scanovich.ai" с конкретным опытом
  - Правила эмпатии и активного слушания
  - Консультативный подход в продажах (доверенный партнёр)
  - Больше примеров живого общения (few-shot)

- **Динамические параметры генерации** - тонкая настройка по этапам продаж
  - Автоматическая настройка temperature, max_tokens, top_p, frequency_penalty, presence_penalty
  - Разные параметры для каждого этапа скрипта продаж
  - Оптимизация для Small Talk (более креативно) и Sales (более детерминированно)

- **Улучшенные модификаторы этапов** - более естественные реакции
  - Примеры естественных реакций для каждого этапа
  - Усиленные правила длины ответов
  - Правила использования имени пользователя

- **Улучшенные промпты для слотов** - открытые вопросы вместо допроса
  - Более естественные формулировки
  - Убраны "допросные" тона

- **Улучшенный классификатор намерений** - расширенные ключевые слова и веса
  - Расширенные списки ключевых слов для Sales AI и Real Estate
  - Веса для важных слов (более важные слова = больше вес)
  - Улучшенная логика сохранения контекста
  - Логирование результатов классификации для анализа

- **Поддержка имени пользователя** - извлечение и использование имени из Telegram API
  - Автоматическое сохранение имени пользователя в контексте
  - Использование имени в промптах (периодически, не в каждом сообщении)

### Changed

- Системный промпт полностью переработан для более живого общения
- Модификаторы этапов обновлены с примерами и правилами консультативного подхода
- Промпты для запроса слотов сделаны более открытыми и естественными
- Параметры генерации теперь динамически настраиваются по этапам

### Technical

- Новый модуль `web_search.py` для интеграции с MCP Web Search
- Расширен `ai_client.py` для поддержки дополнительных параметров генерации
- Обновлен `config.py` с конфигурацией Web Search
- Добавлены тесты для Web Search интеграции

## [0.1.0] - 2025-11-05

### Added

- Базовая функциональность Telegram AI-ассистента для личного аккаунта
- Интеграция с локальным AI-сервером (OpenAI-compatible API)
- Память и контекст диалогов через SQLite
- Интеграция с Google Calendar (опционально)
- Конфигурация через YAML и ENV переменные
- Автоматические ответы на сообщения в личных чатах
- Команды для управления календарем (`/calendar`, `/events`, `/create_event`)

### Technical

- Python 3.12
- Telethon для работы с личным аккаунтом Telegram
- SQLAlchemy для работы с БД
- Pydantic Settings для конфигурации
- Tenacity для ретраев
- httpx для HTTP запросов

